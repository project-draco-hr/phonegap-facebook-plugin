{
  String token=this.fba.facebook.getAccessToken();
  long token_expires=this.fba.facebook.getAccessExpires();
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(this.fba.cordova.getActivity());
  prefs.edit().putLong("access_expires",token_expires).commit();
  prefs.edit().putString("access_token",token).commit();
  Log.d(TAG,"authorized");
  Thread t=new Thread(new Runnable(){
    public void run(){
      try {
        JSONObject o=new JSONObject(fba.facebook.request("/me"));
        fba.userId=o.getString("id");
        fba.success(getResponse(),fba.callbackId);
      }
 catch (      MalformedURLException e) {
        e.printStackTrace();
      }
catch (      IOException e) {
        e.printStackTrace();
      }
catch (      JSONException e) {
        e.printStackTrace();
      }
    }
  }
);
  t.start();
}
