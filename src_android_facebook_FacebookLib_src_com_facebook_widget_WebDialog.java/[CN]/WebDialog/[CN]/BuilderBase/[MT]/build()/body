{
  if (session != null && session.isOpened()) {
    parameters.putString(ServerProtocol.DIALOG_PARAM_APP_ID,session.getApplicationId());
    parameters.putString(ServerProtocol.DIALOG_PARAM_ACCESS_TOKEN,session.getAccessToken());
  }
 else {
    parameters.putString(ServerProtocol.DIALOG_PARAM_APP_ID,applicationId);
  }
  if (!parameters.containsKey(ServerProtocol.DIALOG_PARAM_REDIRECT_URI)) {
    parameters.putString(ServerProtocol.DIALOG_PARAM_REDIRECT_URI,REDIRECT_URI);
  }
  return new WebDialog(context,action,parameters,theme,listener);
}
