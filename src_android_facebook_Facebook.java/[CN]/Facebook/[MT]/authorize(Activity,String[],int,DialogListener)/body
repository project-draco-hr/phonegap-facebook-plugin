{
  boolean singleSignOnStarted=false;
  mAuthDialogListener=listener;
  autoPublishAsync(activity.getApplicationContext());
  if (activityCode >= 0) {
    singleSignOnStarted=startSingleSignOn(activity,mAppId,permissions,activityCode);
  }
  if (!singleSignOnStarted) {
    startDialogAuth(activity,permissions);
  }
}
