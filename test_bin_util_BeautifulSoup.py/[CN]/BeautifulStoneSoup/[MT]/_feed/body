def _feed(self, inDocumentEncoding=None, isHTML=False):
    markup = self.markup
    if isinstance(markup, unicode):
        if (not hasattr(self, 'originalEncoding')):
            self.originalEncoding = None
    else:
        dammit = UnicodeDammit(markup, [self.fromEncoding, inDocumentEncoding], smartQuotesTo=self.smartQuotesTo, isHTML=isHTML)
        markup = dammit.unicode
        self.originalEncoding = dammit.originalEncoding
        self.declaredHTMLEncoding = dammit.declaredHTMLEncoding
    if markup:
        if self.markupMassage:
            if (not hasattr(self.markupMassage, '__iter__')):
                self.markupMassage = self.MARKUP_MASSAGE
            for (fix, m) in self.markupMassage:
                markup = fix.sub(m, markup)
            del self.markupMassage
    self.reset()
    SGMLParser.feed(self, markup)
    self.endData()
    while (self.currentTag.name != self.ROOT_TAG_NAME):
        self.popTag()
