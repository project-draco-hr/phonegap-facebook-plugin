def handle_entityref(self, ref):
    'Handle entity references as data, possibly converting known\n        HTML and/or XML entity references to the corresponding Unicode\n        characters.'
    data = None
    if self.convertHTMLEntities:
        try:
            data = unichr(name2codepoint[ref])
        except KeyError:
            pass
    if ((not data) and self.convertXMLEntities):
        data = self.XML_ENTITIES_TO_SPECIAL_CHARS.get(ref)
    if ((not data) and self.convertHTMLEntities and (not self.XML_ENTITIES_TO_SPECIAL_CHARS.get(ref))):
        data = ('&amp;%s' % ref)
    if (not data):
        data = ('&%s;' % ref)
    self.handle_data(data)
