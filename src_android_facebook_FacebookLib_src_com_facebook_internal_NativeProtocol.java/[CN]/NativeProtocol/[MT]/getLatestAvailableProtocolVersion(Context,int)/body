{
  ContentResolver contentResolver=context.getContentResolver();
  String[] projection=new String[]{PLATFORM_PROVIDER_VERSION_COLUMN};
  Cursor c=contentResolver.query(PLATFORM_PROVIDER_VERSIONS_URI,projection,null,null,null);
  if (c == null) {
    return NO_PROTOCOL_AVAILABLE;
  }
  Set<Integer> versions=new HashSet<Integer>();
  while (c.moveToNext()) {
    int version=c.getInt(c.getColumnIndex(PLATFORM_PROVIDER_VERSION_COLUMN));
    versions.add(version);
  }
  for (  Integer knownVersion : KNOWN_PROTOCOL_VERSIONS) {
    if (knownVersion < minimumVersion) {
      return NO_PROTOCOL_AVAILABLE;
    }
    if (versions.contains(knownVersion)) {
      return knownVersion;
    }
  }
  return NO_PROTOCOL_AVAILABLE;
}
